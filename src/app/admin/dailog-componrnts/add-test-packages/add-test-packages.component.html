<div class="agent-addupdate-dialog">
  <div class="d-flex justify-content-between">
    <h1 mat-dialog-title>
      {{ selectedtestPackages.action === "add" ? "ADD" : "UPDATE" }} {{selectedtestPackages.role | uppercase}}
    </h1>
    <div class="button">
      <a class="btn btn-xs btn-icon btn-hover-primary" href="javascript:void(0)" (click)="onClose()">X</a>
    </div>
  </div>

  <div mat-dialog-content>

    <form [formGroup]="testPackagesFormGroup">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <input type="text" class="form-control customMatInput" placeholder="Enter Test Package Name" formControlName="name"
              [ngClass]="{ 'is-invalid': o.name.touched && o.name.errors }" required />
            <div *ngIf="o.name.touched && o.name.errors" class="text-danger">
              <div *ngIf="o.name.errors.required">Please enter test package name</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">

            <!-- <mat-form-field class="example-full-width"> -->
            <!-- <input type="text" placeholder="Search Patients By Name or PID" aria-label="Number" matInput
                formControlName="tests" (keyup)="getpatients($event)" [matAutocomplete]="auto"> -->
            <!-- (keyup)="checkPin($event)"  -->
            <!-- <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
                (optionSelected)="onFileChange($event.option.value)">
                <mat-option *ngFor="let option of options" [value]="option" multiple>
                  {{option}} 
                </mat-option>
              </mat-autocomplete> -->

            <mat-form-field>
              <!-- #multiSelect -->
              <mat-select formControlName="tests" placeholder="Tests" multiple 
                >
                <!-- <mat-option>
                    <ngx-mat-select-search formControlName="bankMultiFilterCtrl"></ngx-mat-select-search>
                  </mat-option> -->
                <input matInput (keyup)="changeHandler($event)" type="text" placeholder="Search test"
                  style="padding: 10px;">
                <mat-option *ngFor="let test of allTests" [value]="test._id">
                  {{test.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>


            <!-- </mat-form-field> -->

            <!-- <input type="email" class="form-control" placeholder="email address" formControlName="tests"
              [ngClass]="{ 'is-invalid': o.tests.touched && o.tests.errors }" required
              pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$" /> -->
            <div *ngIf="o.tests.touched && o.tests.errors" class="text-danger">
              <div *ngIf="o.tests.errors.required">Please enter your Email</div>
            </div>
            <div *ngIf="o.tests.errors" class="text-danger">
              <div *ngIf="o.tests.errors.pattern">Please enter your correct tests</div>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-center">
        <button class="btn" (click)="addtestPackages()" *ngIf="selectedtestPackages.action === 'add'"
          [disabled]="!testPackagesFormGroup.valid">
          Save
        </button>
        <button class="btn" (click)="updatetestPackages()" *ngIf="selectedtestPackages.action === 'update'"
          [disabled]="!testPackagesFormGroup.valid">
          Update
        </button>
      </div>
    </form>
  </div>
</div>